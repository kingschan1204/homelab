# debian12优化

## 禁用不必要的服务

```
sudo systemctl list-unit-files --state=enabled  # 查看已启用的服务
sudo systemctl disable bluetooth cups avahi-daemon ModemManager  # 禁用示例服务
```

## 优化启动项
```
systemd-analyze blame
根据输出结果，禁用不必要的启动项。
```

## 解决Debian下Vi编辑器的方向键和退格键失灵的问题
> 发现Debian下Vi编辑器在文本输入模式时，不能正确使用方向键和退格键，解决方法：用vi 打开`/etc/vim/vimrc.tiny`，输入以下两行：
```
set nocompatible
set backspace=2
```
这样就切换到非兼容模式，并且退格键也可以正常使用了。

## 修改国内源
```
bash <(curl -sSL https://linuxmirrors.cn/main.sh)
```

## 命令缺失问题
> debian12 安装完成后有一部分常用命令没有，这是因为环境变量中没有 /usr/sbin 路径，所以需要手动添加环境变量

```
vi /etc/profile
# 在最后一行加入

export PATH=$PATH:/usr/sbin

source /etc/profile

```
## 中文支持
```
sudo dpkg-reconfigure locales
```
一直按下到最后， 空格 选择， tab 切换选项，空格选择完这几个后，一直选择 ok 回车即可

## 开启 TCP BBR 网络优化
> BBR是由Google开发的，基于TCP加速优化工具，该算法能够有效地加快数据传输，减少网络拥塞，强烈建议服务器上开启。Debian 10/11/12默认内核已编译了TCP BBR内容，可以直接输入代码开启。
```
# 修改系统变量
echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf
echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf
# 让BBR永久生效
sysctl -p
# 可以输入以下代码检验是否成功开启
lsmod | grep bbr #返回值显示tcp_bbr及数值，则代表BBR已启动
```

## 内核参数优化
> 编辑 `/etc/sysctl.conf`：
```
vm.swappiness=1                # 最小化Swap使用
vm.dirty_ratio=5               # 减少磁盘缓存占用
net.ipv4.tcp_fastopen=3        # 加速TCP连接
net.core.rmem_max=16777216     # 提高网络吞吐
fs.file-max=65535              # 增加文件句柄数
```